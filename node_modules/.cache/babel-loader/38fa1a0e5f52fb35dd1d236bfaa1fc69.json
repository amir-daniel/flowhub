{"ast":null,"code":"import _slicedToArray from\"C:\\\\Users\\\\97252\\\\Documents\\\\Projects\\\\river\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\slicedToArray.js\";import _asyncToGenerator from\"C:\\\\Users\\\\97252\\\\Documents\\\\Projects\\\\river\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\asyncToGenerator.js\";import _regeneratorRuntime from\"C:\\\\Users\\\\97252\\\\Documents\\\\Projects\\\\river\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";/*global chrome*/import\"./App.css\";import NumberInput from\"./components/NumberInput\";import Timer from\"./components/Timer\";import{useState,useEffect,useReducer}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){// ETA Mode (Forward Looking),\n// Sequential Mode (Time Elapsed)\nvar filterInput=function filterInput(newInput,oldInput){var _ref;if(((_ref=newInput+\"\")===null||_ref===void 0?void 0:_ref.trim())===\"\"){return 0;}return Number.isInteger(+newInput)?+newInput:+oldInput;};var dataReducer=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(state,action){var newVal,recordedAt;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(action.type===\"USER_INITIALIZE\")){_context.next=4;break;}return _context.abrupt(\"return\",{start:filterInput(action.start,undefined),current:filterInput(action.current,undefined),end:filterInput(action.end,undefined),time:action.time,total:action.total,timerID:state.timerID});case 4:if(!(action.type===\"USER_ADDTIME\")){_context.next=9;break;}chrome.storage.sync.set({startedRecordingAt:null,savedTime:+state.time+action.time});return _context.abrupt(\"return\",{start:state.start,current:state.current,end:state.end,time:+state.time+action.time,total:state.total,timerID:state.timerID});case 9:if(!(action.type===\"START_CHANGE\")){_context.next=14;break;}newVal=filterInput(+action.value,+state.start);return _context.abrupt(\"return\",{start:newVal,current:newVal>+state.current?newVal:+state.current,end:newVal>+state.end?newVal:state.end,time:state.time,total:state.total,timerID:state.timerID});case 14:if(!(action.type===\"CURRENT_CHANGE\")){_context.next=19;break;}newVal=filterInput(+action.value,+state.current);return _context.abrupt(\"return\",{start:newVal<+state.start?newVal:+state.start,current:newVal,end:newVal>+state.end?newVal:+state.end,time:state.time,total:state.total,timerID:state.timerID});case 19:if(!(action.type===\"END_CHANGE\")){_context.next=24;break;}newVal=filterInput(+action.value,+state.end);return _context.abrupt(\"return\",{start:newVal<+state.start?newVal:state.start,current:newVal<+state.current?newVal:state.current,end:newVal,time:state.time,total:state.total,timerID:state.timerID});case 24:if(!(action.type===\"TOTAL_UPDATE\")){_context.next=28;break;}return _context.abrupt(\"return\",{start:state.start,current:state.current,end:state.end,time:state.time,total:action.value,timerID:state.timerID});case 28:if(!(action.type===\"TIME_RESET\")){_context.next=34;break;}clearInterval(state.timerID);chrome.storage.sync.set({startedRecordingAt:null,savedTime:null});return _context.abrupt(\"return\",{start:state.start,current:state.current,end:state.end,time:null,total:state.total,timerID:false});case 34:if(!(action.type===\"FULL_RESET\")){_context.next=40;break;}clearInterval(state.timerID);chrome.storage.sync.set({startedRecordingAt:null,savedTime:null});return _context.abrupt(\"return\",{start:0,current:0,end:0,time:null,total:state.total,timerID:false});case 40:if(!(action.type===\"MODIFY_TIMERID\")){_context.next=45;break;}chrome.storage.sync.get([\"startedRecordingAt\"],function(data){if(data.startedRecordingAt===null){chrome.storage.sync.set({startedRecordingAt:Date.now()-+state.time*1000,savedTime:null});}});return _context.abrupt(\"return\",{start:state.start,current:state.current,end:state.end,time:null,total:state.total,timerID:action.value});case 45:if(!(action.type===\"TIME_START\")){_context.next=49;break;}throw new Error();case 49:if(!(action.type===\"TIME_PAUSE\")){_context.next=54;break;}clearInterval(state.timerID);_context.next=53;return chrome.storage.sync.get([\"startedRecordingAt\"],function(data){recordedAt=data.startedRecordingAt;if(data.startedRecordingAt!==null){chrome.storage.sync.set({startedRecordingAt:null,savedTime:(Date.now()-data.startedRecordingAt)/1000});}});case 53:return _context.abrupt(\"return\",{start:state.start,current:state.current,end:state.end,time:recordedAt!==null?(Date.now()-recordedAt)/1000:state.time,total:state.total,timerID:false});case 54:case\"end\":return _context.stop();}}},_callee);}));return function dataReducer(_x,_x2){return _ref2.apply(this,arguments);};}();var _useReducer=useReducer(dataReducer,{start:null,current:null,end:null,time:null,total:null,timerID:false}),_useReducer2=_slicedToArray(_useReducer,2),dataState=_useReducer2[0],dataDispatch=_useReducer2[1];var _useState=useState(null),_useState2=_slicedToArray(_useState,2),getUserName=_useState2[0],setUserName=_useState2[1];useEffect(function(){// initialize some variables from chrome storage\nchrome.storage.sync.get([\"startedRecordingAt\",\"savedTime\",\"start\",\"progress\",\"end\",\"userName\",\"totalSeconds\"],function(data){dataDispatch({type:\"USER_INITIALIZE\",time:data.startedRecordingAt===null// check if a recording is in progress\n?data.savedTime===null?null:data.savedTime:null,start:data.start,current:data.progress,end:data.end,total:data.totalSeconds});setUserName(data.userName);});},[]);useEffect(function(){// update variables\nchrome.storage.sync.set({start:dataState.start,progress:dataState.current,end:dataState.end});},[dataState.start,dataState.current,dataState.end,dataState.timerID,dataState.time]);var timeAddHandler=function timeAddHandler(){if(dataState.timerID!==false){alert(\"Can't proceed while timer is active.\");return;}var x=prompt(\"Enter amount of time to load in the following format: h:mm:ss\");var timeArr=x.split(\":\").reverse();if((timeArr===null||timeArr===void 0?void 0:timeArr.length)!==3){alert(\"Invalid input! Too many or too few fields were input.\");return;}if(!Number.isInteger(+timeArr[0])||!Number.isInteger(+timeArr[1])||!Number.isInteger(+timeArr[2])){alert(\"Invalid input! All fields must be integers.\");return;}//All checks passed, now we're diving in to the addition.\nvar desiredTimeInSeconds=+timeArr[0]+ +timeArr[1]*60+ +timeArr[2]*3600;chrome.storage.sync.set({savedTime:desiredTimeInSeconds+dataDispatch({type:\"USER_ADDTIME\",time:desiredTimeInSeconds}).time});};var nameChangeHandler=function nameChangeHandler(){var _prompt;var newUserName=(_prompt=prompt(\"Please choose your nickname:\"))===null||_prompt===void 0?void 0:_prompt.trim();setUserName((newUserName===null||newUserName===void 0?void 0:newUserName.length)===0?getUserName:newUserName);chrome.storage.sync.set({userName:(newUserName===null||newUserName===void 0?void 0:newUserName.length)===0?getUserName:newUserName});};var tickHandler=function tickHandler(){chrome.storage.sync.get([\"start\",\"progress\",\"end\",\"totalSeconds\"],function(data){dataDispatch({type:\"START_CHANGE\",value:data.start});dataDispatch({type:\"CURRENT_CHANGE\",value:data.progress});dataDispatch({type:\"END_CHANGE\",value:data.end});dataDispatch({type:\"TOTAL_UPDATE\",value:data.totalSeconds});});};return/*#__PURE__*/_jsxs(\"div\",{id:\"popup-container\",className:\"Card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"Card-header\",children:[/*#__PURE__*/_jsx(\"a\",{onClick:nameChangeHandler,className:\"headline\",children:/*#__PURE__*/_jsx(\"b\",{children:getUserName})}),/*#__PURE__*/_jsx(\"a\",{onClick:timeAddHandler,className:\"mode\",children:\"Import Time\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"Card-layout\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"stats seperated datasection\",children:[/*#__PURE__*/_jsx(\"div\",{children:\"Stats\"}),/*#__PURE__*/_jsxs(\"div\",{children:[\"You have in total \",/*#__PURE__*/_jsx(\"b\",{children:Math.round(dataState.total/3600)}),\" \",\"recorded hours.\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"initialize-data seperated datasection\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"data-row\",children:[/*#__PURE__*/_jsx(\"div\",{children:\"Start\"}),/*#__PURE__*/_jsx(NumberInput,{className:\"data-input\",placeholder:\"0\",onChange:function onChange(event){dataDispatch({type:\"START_CHANGE\",value:event.target.value});},value:+dataState.start===0?\"\":dataState.start})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"data-row\",children:[/*#__PURE__*/_jsx(\"div\",{children:\"Progress\"}),/*#__PURE__*/_jsx(NumberInput,{className:\"data-input\",placeholder:\"0\",onChange:function onChange(event){dataDispatch({type:\"CURRENT_CHANGE\",value:event.target.value});},value:+dataState.current===0?\"\":dataState.current})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"data-row\",children:[/*#__PURE__*/_jsx(\"div\",{children:\"Finish\"}),/*#__PURE__*/_jsx(NumberInput,{className:\"data-input\",placeholder:\"0\",onChange:function onChange(event){dataDispatch({type:\"END_CHANGE\",value:event.target.value});},value:+dataState.end===0?\"\":dataState.end})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"actions datasection\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"buttons-container\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return dataDispatch({type:\"TIME_RESET\"});},onDoubleClick:function onDoubleClick(){return dataDispatch({type:\"FULL_RESET\"});},children:\"Reset\"}),/*#__PURE__*/_jsx(Timer,{timerID:dataState.timerID,modifyTimerID:function modifyTimerID(value){dataDispatch({type:\"MODIFY_TIMERID\",value:value});},onTick:tickHandler,onPause:function onPause(){return dataDispatch({type:\"TIME_PAUSE\"});}})]})})]})]});}export default App;","map":{"version":3,"sources":["C:/Users/97252/Documents/Projects/river/src/App.js"],"names":["NumberInput","Timer","useState","useEffect","useReducer","App","filterInput","newInput","oldInput","trim","Number","isInteger","dataReducer","state","action","type","start","undefined","current","end","time","total","timerID","chrome","storage","sync","set","startedRecordingAt","savedTime","newVal","value","clearInterval","get","data","Date","now","Error","recordedAt","dataState","dataDispatch","getUserName","setUserName","progress","totalSeconds","userName","timeAddHandler","alert","x","prompt","timeArr","split","reverse","length","desiredTimeInSeconds","nameChangeHandler","newUserName","tickHandler","Math","round","event","target"],"mappings":"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","sourcesContent":["/*global chrome*/\r\nimport \"./App.css\";\r\nimport NumberInput from \"./components/NumberInput\";\r\nimport Timer from \"./components/Timer\";\r\nimport { useState, useEffect, useReducer } from \"react\";\r\n\r\nfunction App() {\r\n  // ETA Mode (Forward Looking),\r\n  // Sequential Mode (Time Elapsed)\r\n\r\n  const filterInput = (newInput, oldInput) => {\r\n    if ((newInput + \"\")?.trim() === \"\") {\r\n      return 0;\r\n    }\r\n    return Number.isInteger(+newInput) ? +newInput : +oldInput;\r\n  };\r\n\r\n  const dataReducer = async (state, action) => {\r\n    let newVal;\r\n    if (action.type === \"USER_INITIALIZE\") {\r\n      return {\r\n        start: filterInput(action.start, undefined),\r\n        current: filterInput(action.current, undefined),\r\n        end: filterInput(action.end, undefined),\r\n        time: action.time,\r\n        total: action.total,\r\n        timerID: state.timerID,\r\n      };\r\n    } else if (action.type === \"USER_ADDTIME\") {\r\n      chrome.storage.sync.set({\r\n        startedRecordingAt: null,\r\n        savedTime: +state.time + action.time,\r\n      });\r\n      return {\r\n        start: state.start,\r\n        current: state.current,\r\n        end: state.end,\r\n        time: +state.time + action.time,\r\n        total: state.total,\r\n        timerID: state.timerID,\r\n      };\r\n    } else if (action.type === \"START_CHANGE\") {\r\n      newVal = filterInput(+action.value, +state.start);\r\n      return {\r\n        start: newVal,\r\n        current: newVal > +state.current ? newVal : +state.current,\r\n        end: newVal > +state.end ? newVal : state.end,\r\n        time: state.time,\r\n        total: state.total,\r\n        timerID: state.timerID,\r\n      };\r\n    } else if (action.type === \"CURRENT_CHANGE\") {\r\n      newVal = filterInput(+action.value, +state.current);\r\n      return {\r\n        start: newVal < +state.start ? newVal : +state.start,\r\n        current: newVal,\r\n        end: newVal > +state.end ? newVal : +state.end,\r\n        time: state.time,\r\n        total: state.total,\r\n        timerID: state.timerID,\r\n      };\r\n    } else if (action.type === \"END_CHANGE\") {\r\n      newVal = filterInput(+action.value, +state.end);\r\n      return {\r\n        start: newVal < +state.start ? newVal : state.start,\r\n        current: newVal < +state.current ? newVal : state.current,\r\n        end: newVal,\r\n        time: state.time,\r\n        total: state.total,\r\n        timerID: state.timerID,\r\n      };\r\n    } else if (action.type === \"TOTAL_UPDATE\") {\r\n      return {\r\n        start: state.start,\r\n        current: state.current,\r\n        end: state.end,\r\n        time: state.time,\r\n        total: action.value,\r\n        timerID: state.timerID,\r\n      };\r\n    } else if (action.type === \"TIME_RESET\") {\r\n      clearInterval(state.timerID);\r\n      chrome.storage.sync.set({\r\n        startedRecordingAt: null,\r\n        savedTime: null,\r\n      });\r\n      return {\r\n        start: state.start,\r\n        current: state.current,\r\n        end: state.end,\r\n        time: null,\r\n        total: state.total,\r\n        timerID: false,\r\n      };\r\n    } else if (action.type === \"FULL_RESET\") {\r\n      clearInterval(state.timerID);\r\n      chrome.storage.sync.set({\r\n        startedRecordingAt: null,\r\n        savedTime: null,\r\n      });\r\n      return {\r\n        start: 0,\r\n        current: 0,\r\n        end: 0,\r\n        time: null,\r\n        total: state.total,\r\n        timerID: false,\r\n      };\r\n    } else if (action.type === \"MODIFY_TIMERID\") {\r\n      chrome.storage.sync.get([\"startedRecordingAt\"], (data) => {\r\n        if (data.startedRecordingAt === null) {\r\n          chrome.storage.sync.set({\r\n            startedRecordingAt: Date.now() - +state.time * 1000,\r\n            savedTime: null,\r\n          });\r\n        }\r\n      });\r\n      return {\r\n        start: state.start,\r\n        current: state.current,\r\n        end: state.end,\r\n        time: null,\r\n        total: state.total,\r\n        timerID: action.value,\r\n      };\r\n    } else if (action.type === \"TIME_START\") {\r\n      throw new Error(); // this area is now deprecated!\r\n    } else if (action.type === \"TIME_PAUSE\") {\r\n      clearInterval(state.timerID);\r\n      let recordedAt;\r\n      await chrome.storage.sync.get([\"startedRecordingAt\"], (data) => {\r\n        recordedAt = data.startedRecordingAt;\r\n        if (data.startedRecordingAt !== null) {\r\n          chrome.storage.sync.set({\r\n            startedRecordingAt: null,\r\n            savedTime: (Date.now() - data.startedRecordingAt) / 1000,\r\n          });\r\n        }\r\n      });\r\n\r\n      return {\r\n        start: state.start,\r\n        current: state.current,\r\n        end: state.end,\r\n        time:\r\n          recordedAt !== null ? (Date.now() - recordedAt) / 1000 : state.time,\r\n        total: state.total,\r\n        timerID: false,\r\n      };\r\n    }\r\n  };\r\n\r\n  let [dataState, dataDispatch] = useReducer(dataReducer, {\r\n    start: null,\r\n    current: null,\r\n    end: null,\r\n    time: null,\r\n    total: null,\r\n    timerID: false,\r\n  });\r\n\r\n  let [getUserName, setUserName] = useState(null);\r\n\r\n  useEffect(() => {\r\n    // initialize some variables from chrome storage\r\n    chrome.storage.sync.get(\r\n      [\r\n        \"startedRecordingAt\",\r\n        \"savedTime\",\r\n        \"start\",\r\n        \"progress\",\r\n        \"end\",\r\n        \"userName\",\r\n        \"totalSeconds\",\r\n      ],\r\n      (data) => {\r\n        dataDispatch({\r\n          type: \"USER_INITIALIZE\",\r\n          time:\r\n            data.startedRecordingAt === null // check if a recording is in progress\r\n              ? data.savedTime === null\r\n                ? null\r\n                : data.savedTime\r\n              : null,\r\n          start: data.start,\r\n          current: data.progress,\r\n          end: data.end,\r\n          total: data.totalSeconds,\r\n        });\r\n        setUserName(data.userName);\r\n      }\r\n    );\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    // update variables\r\n    chrome.storage.sync.set({\r\n      start: dataState.start,\r\n      progress: dataState.current,\r\n      end: dataState.end,\r\n    });\r\n  }, [\r\n    dataState.start,\r\n    dataState.current,\r\n    dataState.end,\r\n    dataState.timerID,\r\n    dataState.time,\r\n  ]);\r\n\r\n  const timeAddHandler = () => {\r\n    if (dataState.timerID !== false) {\r\n      alert(\"Can't proceed while timer is active.\");\r\n      return;\r\n    }\r\n\r\n    let x = prompt(\r\n      \"Enter amount of time to load in the following format: h:mm:ss\"\r\n    );\r\n\r\n    let timeArr = x.split(\":\").reverse();\r\n\r\n    if (timeArr?.length !== 3) {\r\n      alert(\"Invalid input! Too many or too few fields were input.\");\r\n      return;\r\n    }\r\n\r\n    if (\r\n      !Number.isInteger(+timeArr[0]) ||\r\n      !Number.isInteger(+timeArr[1]) ||\r\n      !Number.isInteger(+timeArr[2])\r\n    ) {\r\n      alert(\"Invalid input! All fields must be integers.\");\r\n      return;\r\n    }\r\n\r\n    //All checks passed, now we're diving in to the addition.\r\n    let desiredTimeInSeconds =\r\n      +timeArr[0] + +timeArr[1] * 60 + +timeArr[2] * 3600;\r\n\r\n    chrome.storage.sync.set({\r\n      savedTime:\r\n        desiredTimeInSeconds +\r\n        dataDispatch({ type: \"USER_ADDTIME\", time: desiredTimeInSeconds }).time,\r\n    });\r\n  };\r\n\r\n  const nameChangeHandler = () => {\r\n    let newUserName = prompt(\"Please choose your nickname:\")?.trim();\r\n    setUserName(newUserName?.length === 0 ? getUserName : newUserName);\r\n    chrome.storage.sync.set({\r\n      userName: newUserName?.length === 0 ? getUserName : newUserName,\r\n    });\r\n  };\r\n\r\n  const tickHandler = () => {\r\n    chrome.storage.sync.get(\r\n      [\"start\", \"progress\", \"end\", \"totalSeconds\"],\r\n\r\n      (data) => {\r\n        dataDispatch({ type: \"START_CHANGE\", value: data.start });\r\n        dataDispatch({ type: \"CURRENT_CHANGE\", value: data.progress });\r\n        dataDispatch({ type: \"END_CHANGE\", value: data.end });\r\n        dataDispatch({ type: \"TOTAL_UPDATE\", value: data.totalSeconds });\r\n      }\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div id=\"popup-container\" className=\"Card\">\r\n      <div className=\"Card-header\">\r\n        <a onClick={nameChangeHandler} className=\"headline\">\r\n          <b>{getUserName}</b>\r\n        </a>\r\n        <a onClick={timeAddHandler} className=\"mode\">\r\n          Import Time\r\n        </a>\r\n      </div>\r\n\r\n      <div className=\"Card-layout\">\r\n        <div className=\"stats seperated datasection\">\r\n          <div>Stats</div>\r\n          <div>\r\n            You have in total <b>{Math.round(dataState.total / 3600)}</b>{\" \"}\r\n            recorded hours.\r\n          </div>\r\n        </div>\r\n        <div className=\"initialize-data seperated datasection\">\r\n          <div className=\"data-row\">\r\n            <div>Start</div>\r\n            <NumberInput\r\n              className=\"data-input\"\r\n              placeholder=\"0\"\r\n              onChange={(event) => {\r\n                dataDispatch({\r\n                  type: \"START_CHANGE\",\r\n                  value: event.target.value,\r\n                });\r\n              }}\r\n              value={+dataState.start === 0 ? \"\" : dataState.start}\r\n            />\r\n          </div>\r\n          <div className=\"data-row\">\r\n            <div>Progress</div>\r\n            <NumberInput\r\n              className=\"data-input\"\r\n              placeholder=\"0\"\r\n              onChange={(event) => {\r\n                dataDispatch({\r\n                  type: \"CURRENT_CHANGE\",\r\n                  value: event.target.value,\r\n                });\r\n              }}\r\n              value={+dataState.current === 0 ? \"\" : dataState.current}\r\n            />\r\n          </div>\r\n          <div className=\"data-row\">\r\n            <div>Finish</div>\r\n            <NumberInput\r\n              className=\"data-input\"\r\n              placeholder=\"0\"\r\n              onChange={(event) => {\r\n                dataDispatch({ type: \"END_CHANGE\", value: event.target.value });\r\n              }}\r\n              value={+dataState.end === 0 ? \"\" : dataState.end}\r\n            />\r\n          </div>\r\n        </div>\r\n        <div className=\"actions datasection\">\r\n          {/* <div>Actions</div> */}\r\n          <div className=\"buttons-container\">\r\n            <button\r\n              onClick={() => dataDispatch({ type: \"TIME_RESET\" })}\r\n              onDoubleClick={() => dataDispatch({ type: \"FULL_RESET\" })}\r\n            >\r\n              Reset\r\n            </button>\r\n            <Timer\r\n              timerID={dataState.timerID}\r\n              modifyTimerID={(value) => {\r\n                dataDispatch({ type: \"MODIFY_TIMERID\", value: value });\r\n              }}\r\n              onTick={tickHandler}\r\n              onPause={() => dataDispatch({ type: \"TIME_PAUSE\" })}\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n"]},"metadata":{},"sourceType":"module"}