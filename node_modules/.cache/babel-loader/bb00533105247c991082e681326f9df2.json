{"ast":null,"code":"import _slicedToArray from\"C:\\\\Users\\\\97252\\\\Documents\\\\Projects\\\\river\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\slicedToArray.js\";import{clear}from\"@testing-library/user-event/dist/clear\";import{useState,useEffect,useRef}from\"react\";import\"./BufferElement.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var BufferElement=function BufferElement(props){var _useState=useState(props.isActive),_useState2=_slicedToArray(_useState,2),message=_useState2[0],setMessage=_useState2[1];var isFirstRender=useRef(true);var designDigit=function designDigit(num){return+num<10?\"0\"+num:num;};var destructureSeconds=function destructureSeconds(time){time=Math.floor(time);// round time received in seconds\nvar sec=designDigit(time%60);var min=designDigit((time-sec)/60%60);var hr=(time-sec-60*min)/3600;return[hr,min,sec];};var beautify=function beautify(time){var _destructureSeconds=destructureSeconds(time),_destructureSeconds2=_slicedToArray(_destructureSeconds,3),hr=_destructureSeconds2[0],min=_destructureSeconds2[1],sec=_destructureSeconds2[2];return\"\".concat(hr,\"h\").concat(min,\"m\").concat(sec,\"s\");};var craftTimeMessage=props.timeAccumulated>0?/*#__PURE__*/_jsx(\"div\",{children:beautify(props.timeAccumulated)}):false;useEffect(function(){var cleaningTimer;if(props.isInitializing.current===false&&isFirstRender.current===true){// don't show loading screen on first initialization\nisFirstRender.current=false;return craftTimeMessage;}else if(props.isInitializing.current===true){return craftTimeMessage;}if(props.isActive===false){setMessage(/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"svg\",{class:\"checkmark\",xmlns:\"http://www.w3.org/2000/svg\",viewBox:\"0 0 52 52\",children:[/*#__PURE__*/_jsx(\"circle\",{class:\"checkmark__circle\",cx:\"26\",cy:\"26\",r:\"25\",fill:\"none\"}),/*#__PURE__*/_jsx(\"path\",{class:\"checkmark__check\",fill:\"none\",d:\"M14.1 27.2l7.1 7.2 16.7-16.8\"})]})}));cleaningTimer=setTimeout(function(){setMessage(craftTimeMessage);},2000);}else{setMessage(/*#__PURE__*/_jsxs(\"div\",{className:\"lds-roller\",children:[/*#__PURE__*/_jsx(\"div\",{}),/*#__PURE__*/_jsx(\"div\",{}),/*#__PURE__*/_jsx(\"div\",{}),/*#__PURE__*/_jsx(\"div\",{}),/*#__PURE__*/_jsx(\"div\",{}),/*#__PURE__*/_jsx(\"div\",{}),/*#__PURE__*/_jsx(\"div\",{}),/*#__PURE__*/_jsx(\"div\",{})]}));}return function(){clearTimeout(cleaningTimer);};},[props.isActive,props.isInitializing.current]);return message;};export default BufferElement;","map":{"version":3,"sources":["C:/Users/97252/Documents/Projects/river/src/components/BufferElement.js"],"names":["clear","useState","useEffect","useRef","BufferElement","props","isActive","message","setMessage","isFirstRender","designDigit","num","destructureSeconds","time","Math","floor","sec","min","hr","beautify","craftTimeMessage","timeAccumulated","cleaningTimer","isInitializing","current","setTimeout","clearTimeout"],"mappings":"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","sourcesContent":["import { clear } from \"@testing-library/user-event/dist/clear\";\r\nimport { useState, useEffect, useRef } from \"react\";\r\nimport \"./BufferElement.css\";\r\n\r\nconst BufferElement = (props) => {\r\n  let [message, setMessage] = useState(props.isActive);\r\n  let isFirstRender = useRef(true);\r\n\r\n  const designDigit = (num) => (+num < 10 ? \"0\" + num : num);\r\n\r\n  const destructureSeconds = (time) => {\r\n    time = Math.floor(time); // round time received in seconds\r\n\r\n    let sec = designDigit(time % 60);\r\n    let min = designDigit(((time - sec) / 60) % 60);\r\n    let hr = (time - sec - 60 * min) / 3600;\r\n\r\n    return [hr, min, sec];\r\n  };\r\n\r\n  const beautify = (time) => {\r\n    let [hr, min, sec] = destructureSeconds(time);\r\n\r\n    return `${hr}h${min}m${sec}s`;\r\n  };\r\n\r\n  let craftTimeMessage =\r\n    props.timeAccumulated > 0 ? (\r\n      <div>{beautify(props.timeAccumulated)}</div>\r\n    ) : (\r\n      false\r\n    );\r\n\r\n  useEffect(() => {\r\n    let cleaningTimer;\r\n    if (\r\n      props.isInitializing.current === false &&\r\n      isFirstRender.current === true\r\n    ) {\r\n      // don't show loading screen on first initialization\r\n      isFirstRender.current = false;\r\n      return craftTimeMessage;\r\n    } else if (props.isInitializing.current === true) {\r\n      return craftTimeMessage;\r\n    }\r\n    if (props.isActive === false) {\r\n      setMessage(\r\n        <div>\r\n          <svg\r\n            class=\"checkmark\"\r\n            xmlns=\"http://www.w3.org/2000/svg\"\r\n            viewBox=\"0 0 52 52\"\r\n          >\r\n            <circle\r\n              class=\"checkmark__circle\"\r\n              cx=\"26\"\r\n              cy=\"26\"\r\n              r=\"25\"\r\n              fill=\"none\"\r\n            />\r\n            <path\r\n              class=\"checkmark__check\"\r\n              fill=\"none\"\r\n              d=\"M14.1 27.2l7.1 7.2 16.7-16.8\"\r\n            />\r\n          </svg>\r\n        </div>\r\n      );\r\n      cleaningTimer = setTimeout(() => {\r\n        setMessage(craftTimeMessage);\r\n      }, 2000);\r\n    } else {\r\n      setMessage(\r\n        <div className=\"lds-roller\">\r\n          <div></div>\r\n          <div></div>\r\n          <div></div>\r\n          <div></div>\r\n          <div></div>\r\n          <div></div>\r\n          <div></div>\r\n          <div></div>\r\n        </div>\r\n      );\r\n    }\r\n    return () => {\r\n      clearTimeout(cleaningTimer);\r\n    };\r\n  }, [props.isActive, props.isInitializing.current]);\r\n  return message;\r\n};\r\n\r\nexport default BufferElement;\r\n"]},"metadata":{},"sourceType":"module"}